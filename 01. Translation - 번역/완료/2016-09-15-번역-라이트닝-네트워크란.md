---
layout: translation
category: translation

author: Kcalvin
authorid: kcalvin
tag: kcalvin
title: "라이트닝 네트워크란 무엇이고, 어떻게 비트코인의 확장성에 기여할 수 있을까요?"
date: 2016-09-15
excerpt: "라이트닝 네트워크는 블록체인 확장성 및 속도를 향상시키기 위한 프로토콜입니다. 비트코인 블록체인의 기술적 한계를 극복하기 위해 설계되었지만, 어떠한 블록체인상에서도 구현이 가능합니다."
ori_author: Elizabeth Stark
ori_title: "What is the Lightning Network and how can it help Bitcoin scale?"
ori_address: https://www.coincenter.org/education/key-concepts/lightning-network/
comments: true
---

모든 컴퓨터가 수신된 모든 이메일을 저장해야 이메일을 받을 수 있다고 가정해봅시다. 이것이 블록체인이 작동하는 원리라 할 수 있습니다. 라이트닝 네트워크(Lightning Network)는 블록체인 거래에서 컴퓨터가 오직 관심 있는 데이터(자산)만 저장할 수 있게 합니다.

라이트닝 네트워크는 블록체인 확장성 및 속도를 향상시키기 위한 프로토콜입니다. 비트코인 블록체인의 기술적 한계를 극복하기 위해 설계되었지만, 어떠한 블록체인상에서도 구현이 가능합니다.

비트코인의 분산화된 특성은 네트워크의 거래 속도를 현저히 제한하므로 확장성이 라이트닝 네트워크의 첫 번째 주요 동기라 할 수 있습니다. Visa는 초당 수만 건의 거래를 처리할 수 있지만 비트코인 네트워크에서의 처리 속도는 초당 10개 미만으로 제한됩니다. 라이트닝 개발의 또 다른 동기는 비트코인 블록체인의 "블록 컨펌 시간"인데, 대략 10분이 소요됩니다. 즉 비트코인 거래를 컨펌하는 데 10분이 소요된다는 의미가 됩니다. 또한 비트코인 블록체인의 거래 수수료는 거래다 5에서 10 센트 사이로서, 소액결제를 실현하기란 사실상 불가능에 가깝습니다. 대조적으로 라이트닝 네트워크는 초당 수천에서 수백만 개의 거래를 처리하는 속도록 즉각적인 거래를 가능케 합니다. 또한 수수료는 1센트 미만이거나 심지어 무료입니다.

라이트닝 네트워크는 결제 채널이라는 기술을 기반으로 합니다. 양측 당사자 모두 블록체인 상에서 2/2 멀티 시그니처 거래를 생성하고 적어도 한 쪽이 2/2 결제 채널에 자금을 전송하게 되면 양자 결제 채널이 생성됩니다. 거래 당사자들은 각 하나의 개인 키를 소유하게 되며, 양측의 키로 모두 서명한 경우에만 장부에서 거래가 진행될 수 있습니다. 채널을 여는 초기에는 10분 (혹은 거래 블록에 특성에 따라 상이함)이 소요되지만 차후 참여자는 채널에 할당된 금액을 사용하여 거래 당사자들 간 즉각적인 거래가 가능합니다. 이렇듯 즉각적인 거래는 거래 당사자들의 서명된 거래 기록을 주고받으며 2/2 장부에서 거래가 이루어지게 됩니다.

각 트랜잭션은 네트워크로 브로드캐스팅 되고 네트워크의 채굴자에 의해 블록체인에 포함되어야 유효하지만, 결제 채널에서는 참가자가 채널을 폐기할 때까지 서명된 트랜잭션을 브로드캐스팅 하지 않습니다. 서명 되었지만 브로드캐스팅 되지 않은 거래들은 직통 P2P 커뮤니케이션을 사용하여 교환되며 참가자가 언제든지 교환할 수 있는 상품권처럼 참가자들이 가지고 있습니다.

라이트닝 네트워크를 사용하기 위해 두 명의 참가자 Alice와 Bob은 20달러로 블록체인상에 첫 거래를 생성합니다. 이때 각 거래 당사자는 10달러를 가지고 있습니다.

![](/asset/img/post/lightning1.jpg)

초기 배분된 상태를 Alice가 총 20달러 중 5달러를, Bob은 15달러를 갖도록 장부를 업데이트할 수 있습니다. 참가자들이 거래를 완료하였을 때 가장 최근에 주고받은 서명이 네트워크상에 전송되어 채널 내에서의 배분을 완료합니다--일부의 자산은 Alice로 그리고 (자산이 남으면) 일부는 Bob으로 보내집니다.

라이트닝 네트워크는 결제 채널 기술을 활용하여 채널들로 이루어져 있는 전산망을 만듭니다. “스마트 계약"을 사용하여 이 전산망을 거래 당사자들과의 위험을 상쇄하고 분산화된 기능을 가질 수 있게 합니다. 예를 들어 Alice는 Bob과 채널을 생성할 수 있고, Bob은 또 Carol과 채널을 생성할 수 있고, 또 Carol은 Dave와 채널을 생성할 수 있습니다. 만약 Alice가 Dave와의 거래를 원한다면 Bob과 Carol을 통해 자금을 보낼 수 있으며 궁극적으로 Dave는 자금을 전송받게 됩니다. 그러나 라이트닝 네트워크의 디자인은 고유한 "멀티 시그니처" 및 "스마트 컨트랙트" 덕분에 Alice는 Bob과 Carol을 중개자로 신뢰할 필요가 없습니다. 해당 기술의 프로토콜은 암호화를 통해 자금이 Bob과 Carol을 거쳐 Dave에 도달하도록 하거나, 그러지 못할 경우 Alice에게 자동으로 환불되도록 보장하기 때문입니다.

![](/asset/img/post/lightning2.jpg)

Bob과 Carol은 네트워크상에서 "노드"로서 기능하게 됩니다. 라이트닝 네트워크에서 노드는 비트코인 네트워크에서의 채굴자와 유사한 측면이 있습니다. 각 노드는 분산화된 방식으로 네트워크상에서 거래를 처리하는 서버 역할을 하게 됩니다. 채굴자와 마찬가지로 노드들은 전송되는 자금에 있어 어떠한 영향력도 발휘하지 않습니다. 거래상에서 Bob이 Alice의 자금을 훔칠 수 없는 이유는 Bob이 수령인에게 자금을 전송하고 전송이 완료되었을 경우에만 Bob은 송금인의 자금을 수령하게 되기 때문입니다. 따라서 지불은 전송의 완료 여부에 있습니다. 라이트닝 네트워크의 거래는 암호화 되어있는 비밀의 공개를 조건으로 하며, 노드는 이 비밀을 알고 있어야 이전의 노드로부터 지불이 확정될 수 있습니다 (Dave가 Carol로부터 자금을 받으면 Carol은 Bob으로부터 자금을 받습니다).

하지만 Bob이 오프라인 상태로 변하면 어떻게 될까요? 2/2 결제 채널에서 자금이 영원히 남아 있게 될까요? 신뢰할 수 없는 노드를 처리하기 위해 라이트닝 네트워크에서는 사용자가 채널을 일방적으로 닫을 수 있는 스마트 컨트랙트 메커니즘이 내장되어 있습니다. 이는 Bob이 사라지면 Alice는 항상 자금을 돌려받을 수 있도록 "해쉬 타임-락 계약(hashed timelock contract)"을 사용합니다. Bob의 서버가 다운된 경우에도 Alice가 자금을 돌려받을 수 있도록 이 계약에 시간 값이 설정됩니다 (일반적으로 몇 시간 또는 며칠).

마찬가지로 Alice가 자신의 멀티 시그니처 주소에서 라이트닝 네트워크를 통해 Dave에게 자금을 전송했지만 이후 해당 거래를 조작하려 할 때 어떤 일이 벌어지게 될까요? Alice는 과거의 거래를 블록체인 네트워크에 전송함으로써 Dave에게 자금을 전송하기 이전의 상태로 채널을 되돌리려 할 수 있습니다. 라이트닝 소프트웨어가 이러한 과거의 거래 기록을 삭제하지만, Alice는 소프트웨어 변경을 통해 과거의 거래를 저장했을 수도 있습니다. Alice가 여전히 과거의 잔액을 가지고 있다고 주장한다면, Dave의 소프트웨어(혹은 여타 지정된 서버)는 과거의 거래 기록을 찾기 위해 블록체인 네트워크를 모니터링하기 시작하고, Alice의 과거 거래 전송기록을 찾아내게 되면 그녀는 그녀의 모든 자금을 Dave한테 벌칙으로 잃게 됩니다. 결과적으로 누군가가 유효하지 않은 상태 값(과거의 값)을 전송하는 시도를 하지 않을 인센티브가 있습니다.

만약 Alice와 Bob이 모두 온라인상에서 채널을 닫으려는 경우에는 어떤 일이 발생하게 될까요? 양측의 합의에 의하여 지불 채널을 폐쇄하게 되면, 비트코인 거래를 확인하는 데 걸리는 시간인 10분 안에 블록체인을 통해 자금을 청산할 수 있습니다. 그 사이 Alice와 Bob은 라이트닝 네트워크상에서 수천 번의 거래를 성사시켰을 수 있을 것입니다.

라이트닝 네트워크는 보안 때문에 비트코인이든 다른 코인이든 블록체인 네트워크에 의존할 수밖에 없습니다. 비트코인의 경우 전체 네트워크를 보호하기 위한 작업 증명 알고리즘이 라이트닝 네트워크에도 적용되어 보호합니다. 블록체인은 절대적 중재자이거나 혹은 사실상 자동화된 판사라 할 수 있습니다. 라이트닝 네트워크를 구성하는 결제 채널을 만드는데 사용된 거래에 규칙들이 이미 정해져 있기 때문에 라이트닝 네트워크에서는 항상 판사가 어떠한 판결을 내릴지 알 수 있습니다. 이 판사는 회유되거나 매수할 수 없습니다. 결과적으로 라이트닝 네트워크는 "지역적 합의"의 상태를 "글로벌 합의"(블록체인)에 의해 집행되게 됩니다. 지역적 합의는 그 어떤 참가자라도 상대와의 협의 없이 일방적으로 자신의 자금을 회수할 수 있기 때문에 기존 모델과 다르게 궁극적인 신뢰의 대상이 될 수 없습니다. 라이트닝 네트워크는 블록체인을 사용하여 오프체인에서 발생한 거래를 거래 당사자와의 신뢰 구축 없이 일괄 처리합니다.

라이트닝 네트워크는 비트코인 블록체인에서뿐만 아니라 다른 블록체인에서도 작동될 수 있으며, "크로스 체인 아토믹 스와프"을 통해 블록체인 간 다양한 자산을 즉각적으로 이동시키는 것도 가능합니다. 각 블록체인의 합의 규정이 달라도 되기 때문에 중개하는 청산기관이 없이도 자산의 안전한 거래를 가능케 합니다.

라이트닝 네트워크 안에서는 작은 거래들 또는 일반 거래들이 인터넷에서 패킷의 이동 방식과 비슷하게 네트워크를 통한 이동이 가능합니다. 이를테면 기계 간 결제, 콘텐츠 소액 결제 및 즉각적인 자산 스와프 등과 같이 과거에는 불가능했던 새로운 활용 사례가 만들어질 잠재력이 있습니다.

Elizabeth Stark는 Coin Center의 선임 연구원이자 Lightning의 공동 설립자로, 과거 예일대 로스쿨에서 강의하였다.

Tadge Dryja와 Joseph Poon의 코멘트와 피드백에 감사함을 전합니다.